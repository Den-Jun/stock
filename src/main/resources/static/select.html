<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="https://cdn.bootcss.com/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/socket.io/2.2.0/socket.io.js"></script>
    <!-- 引入vue -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.8/vue.min.js"></script>


    <!-- 引入http-vue-loader -->
    <script src="https://unpkg.com/http-vue-loader"></script>
    <!-- 这里使用了element ui框架 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <style>
        video {
            width: 100%;
        }

        table {
            text-align: center;
        }
    </style>
</head>

<body>
<button type="button" id="bizhi">比值</button>
<button type="button" id="shaixuan">筛选爆量</button>
<table border="1" cellspacing="0">
    <tr>
        <th>序号</th>
        <th>股票编码</th>
        <th>股票名称</th>
        <th>数据日期</th>
        <th>连扳天数</th>
        <th>压力金额</th>
        <th>成交金额</th>
        <th>竞价比(今日竞价量/昨日竞价量)</th>
        <th>竞昨成交比(竞价量/昨日成交量)</th>
        <th>爆量系数（竞价量/昨日分时最大量）</th>
        <th>竞年比（今天竞价量/一年最大量）</th>
        <th>竞封比（竞价量/昨日封单量）</th>
        <th>竞价分钟比(竞价十分钟的平均每一分钟交易量/过去五天平均每分钟交易量)</th>
    </tr>
</table>
<script>

    $(function () {
        $('table tr#value').remove();
    });
    var interval;
    var list = [];
    $('#bizhi').click(function () {
        clearInterval(interval);
        interval = setInterval(A, 1500);
    });
    $('#shaixuan').click(function () {
        clearInterval(interval);
        interval = setInterval(B, 1500);
    });

    function A() {
        $.ajax({
            url: "http://127.0.0.1:8089/select/getRatioDataListByDayStr",
            async: false, //实现ajax的同步请求，在没有返回值之前，同步请求将锁住浏览器，用户其它操作必须等待请求完成才可以执行。
            //处理跨域问题

            dataType: "json",
            method: "GET",

            success: function (res) {
                list = res;
                console.log("res:" + res);
            }
        });
        console.log(list);
        eachTableList(list);
    }

    function B() {
        $.ajax({
            url: "http://127.0.0.1:8089/select/baoLiang",
            async: false, //实现ajax的同步请求，在没有返回值之前，同步请求将锁住浏览器，用户其它操作必须等待请求完成才可以执行。
            //处理跨域问题
            dataType: "json",
            method: "GET",
            success: function (res) {
                list = res;
                console.log("res:" + res);
            }
        });
        console.log(list);
        eachTableList(list);
    }


    function eachTableList(list) {
        // 展示获取过来的数据
        $('table tr#value').remove();
        $(list).each(function (i, ele) {
            var $trC = '<tr id="value">';
            if (ele.ban === true) {
                $trC = '<tr id="value" bgcolor="red">';
            }
            var $tr = $($trC +
                '<td ' + (i + 1) + '</td>' +
                '<td class="name">' + ele.code + '</td>' +
                '<td class="name">' + ele.shareName + '</td>' +
                '<td class="name">' + ele.dataTime + '</td>' +
                '<td class="name">' + ele.continuityDay + '</td>' +
                '<td class="name">' + ele.pressureMoney + '亿' + '</td>' +
                '<td class="name">' + ele.nowMoney + '亿' + '</td>' +
                '<td class="name">' + ele.bidding + '</td>' +
                '<td class="name">' + ele.biddingYesterday + '</td>' +
                '<td class="name">' + ele.explosiveQuantity + '</td>' +
                '<td class="name">' + ele.yearBidding + '</td>' +
                '<td class="name">' + ele.biddingSealed + '</td>' +
                '<td class="name">' + ele.biddingMinter + '</td>' +
                '<</tr>');

            $('table').append($tr);

        });
        console.log($('table'));

    }
</script>
</body>

</html>
